var menumenu=function(){"use strict";function d(n,e){var t,a=n.className.trim(),i=a?a.split(" "):[];n.className=(t=e.trim().split(" ").concat(i),t.filter(function(n,e,t){return t.indexOf(n)===e})).join(" ")}function f(n,e,t){for(var a=0;a<n.length;a++)e.call(t,n[a],a)}function m(n,e){void 0===e&&(e="*");for(var t=n.parentNode;!i(t,e);)t=t.parentNode;return t}function v(n,e){void 0===e&&(e="*");for(var t=[],a=n.parentNode;a!==document;)i(a,e)&&t.push(a),a=a.parentNode;return t}function i(n,e){if(Element.prototype.matches)return n.matches(e);for(var t=document.querySelectorAll(e),a=t.length;0<=--a&&t.item(a)!==n;);return-1<a}function M(n,e){var t,a,i=n.className.trim(),s=i?i.split(" "):[];n.className=(t=s,a=e.trim().split(" "),t.filter(function(n){return!a.includes(n)})).join(" ")}return function(n,i){var s=document.querySelector(n),e=s.querySelectorAll("li"),t=s.querySelectorAll("li > ul"),a=function(){var n=document.createElement("spoink"),e={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"};for(var t in e)if(void 0!==n.style[t])return e[t]}();if(s&&e.length&&t.length){i=function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}({addBackLink:!0,addDropdownToggle:!0,classBackLink:"back-link",classDropdownToggle:"dropdown-toggle",classHasChildren:"has-children",classMenu:"menumenu",classMenuHidden:"menu-hidden",classMenuIn:"menu-in",classMenuOut:"menu-out",classSubMenu:"sub-menu",classSubMenuIn:"sub-menu-in",classSubMenuOut:"sub-menu-out",classSubMenuShown:"sub-menu-shown",idMenu:"menumenu",msgBack:"Back"},i),s.id||(s.id=i.idMenu),d(s,i.classMenu),f(e,function(n,e){n.id||(n.id=s.id+"-item-"+(e+1))}),f(t,function(n){if(d(n,i.classSubMenu),i.addDropdownToggle){var e='<span class="'+i.classDropdownToggle+'"></span>';n.insertAdjacentHTML("beforebegin",e)}if(i.addBackLink){var t='<li class="'+i.classBackLink+'"><a href="#">'+i.msgBack+"</a></li>";n.insertAdjacentHTML("afterbegin",t)}var a=m(n,"li");n.dataset.id=a.id,d(a,i.classHasChildren)});var u=!1;f(s.querySelectorAll("."+i.classDropdownToggle),function(n){n.dataset.id=m(n,"li").id,n.dataset.depth=v(n,"li > ul").length;var e='ul[data-id="'+n.dataset.id+'"]',t=s.querySelector(e);n.addEventListener("click",function(n){n.preventDefault();var e=s.querySelector("."+i.classSubMenuShown);e?"0"===this.dataset.depth&&!1===u?r(e,c):r(e,function(){l(t)}):o(function(){l(t)}),u=!1})}),f(s.querySelectorAll("."+i.classBackLink),function(a){var n=v(a,"#"+s.id+" li")[1];a.dataset.id=n?n.id:"none",a.addEventListener("click",function(n){n.preventDefault();var e=s.querySelector("."+i.classSubMenuShown);if("none"===this.dataset.id)r(e,c);else{var t="."+i.classDropdownToggle+'[data-id="'+a.dataset.id+'"]';u=!0,s.querySelector(t).click()}})});var c=function(){d(s,i.classMenuIn),M(s,i.classMenuHidden),M(s,i.classMenuOut)},o=function(n,e){d(s,i.classMenuOut),d(s,i.classMenuHidden),M(s,i.classMenuIn),"function"==typeof n&&n.call(e)},l=function(n){d(n,i.classSubMenuIn),n.addEventListener(a,function(){d(this,i.classSubMenuShown)},{once:!0})},r=function(n,e,t){d(n,i.classSubMenuOut),M(n,i.classSubMenuIn),n.addEventListener(a,function(){M(this,i.classSubMenuShown),M(this,i.classSubMenuOut),"function"==typeof e&&e.call(t)},{once:!0})}}}}();
