var menumenu=function(){"use strict";function f(n,e){var t,i=n.className.trim(),a=i?i.split(" "):[];n.className=(t=e.trim().split(" ").concat(a),t.filter(function(n,e,t){return t.indexOf(n)===e})).join(" ")}function m(n,e,t){for(var i=0;i<n.length;i++)e.call(t,n[i],i)}function S(n,e){void 0===e&&(e="*");for(var t=n.parentNode;!a(t,e);)t=t.parentNode;return t}function M(n,e){void 0===e&&(e="*");for(var t=[],i=n.parentNode;i!==document;)a(i,e)&&t.push(i),i=i.parentNode;return t}function a(n,e){if(Element.prototype.matches)return n.matches(e);for(var t=document.querySelectorAll(e),i=t.length;0<=--i&&t.item(i)!==n;);return-1<i}function p(e,n,t,i){n.split(" ").forEach(function(n){e.removeEventListener(n,t,i)})}function v(e,n,t,i){n.split(" ").forEach(function(n){e.addEventListener(n,t,i)})}function b(n,e){var t,i,a=n.className.trim(),u=a?a.split(" "):[];n.className=(t=u,i=e.trim().split(" "),t.filter(function(n){return!i.includes(n)})).join(" ")}return function(n,u){var a=document.querySelector(n),e=a.querySelectorAll("li"),t=a.querySelectorAll("li > ul"),i=function(){var n=document.createElement("spoink"),e={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"};for(var t in e)if(void 0!==n.style[t])return e[t]}();if(a&&e.length&&t.length){(u=function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}({addBackLink:!0,addDropdownToggle:!0,classBackLink:"back-link",classDropdownToggle:"dropdown-toggle",classHasChildren:"has-children",classMenuHidden:"menu-hidden",classSubMenu:"sub-menu",closeOnOutsideClick:!0,idMenu:"menumenu",msgBack:"Back"},u)).classMenuIn="menu-in",u.classMenuOut="menu-out",u.classSubMenuIn="sub-menu-in",u.classSubMenuOut="sub-menu-out",u.classSubMenuHidden="sub-menu-hidden",u.classSubMenuShown="sub-menu-shown",a.id||(a.id=u.idMenu),f(a,"menumenu"),m(e,function(n,e){n.id||(n.id=a.id+"-item-"+(e+1))}),m(t,function(n){if(f(n,u.classSubMenu+" "+u.classSubMenuHidden),u.addDropdownToggle){var e='<span class="'+u.classDropdownToggle+' generated"></span>';n.insertAdjacentHTML("beforebegin",e)}if(u.addBackLink){var t='<li class="'+u.classBackLink+'"><a href="#">'+u.msgBack+"</a></li>";n.insertAdjacentHTML("afterbegin",t)}var i=S(n,"li");n.dataset.id=i.id,f(i,u.classHasChildren)});var c=!1;m(a.querySelectorAll("."+u.classDropdownToggle),function(t){t.dataset.id=S(t,"li").id,t.dataset.depth=M(t,"li > ul").length;var n='ul[data-id="'+t.dataset.id+'"]',i=a.querySelector(n);v(t,"click",function(n){n.preventDefault();var e=a.querySelector("."+u.classSubMenuShown);e?"0"===t.dataset.depth&&!1===c?r(e,s):r(e,function(){l(i)}):o(function(){l(i)}),c=!1})}),m(a.querySelectorAll("."+u.classBackLink),function(i){var n=M(i,"#"+a.id+" li")[1];i.dataset.id=n?n.id:"none",v(i,"click",function(n){n.preventDefault();var e=a.querySelector("."+u.classSubMenuShown);if("none"===i.dataset.id)r(e,s);else{var t="."+u.classDropdownToggle+'[data-id="'+i.dataset.id+'"]';c=!0,a.querySelector(t).click()}})});var s=function(){f(a,u.classMenuIn),b(a,u.classMenuHidden),b(a,u.classMenuOut)},o=function(n,e){f(a,u.classMenuOut),f(a,u.classMenuHidden),b(a,u.classMenuIn),u.closeOnOutsideClick&&d(a),"function"==typeof n&&n.call(e)},l=function(n){f(n,u.classSubMenuIn);var t=function(n,e){p(n,e.type,t),b(n,u.classSubMenuHidden),f(n,u.classSubMenuShown)}.bind(n,n);v(n,i,t)},r=function(n,e,t){f(n,u.classSubMenuOut),b(n,u.classSubMenuIn);var a=function(n,e,t,i){p(n,i.type,a),f(n,u.classSubMenuHidden),b(n,u.classSubMenuShown),b(n,u.classSubMenuOut),"function"==typeof e&&e.call(t)}.bind(n,n,e,t);v(n,i,a)},d=function(i){v(document,"click",function n(e){if(!i.contains(e.target)){var t=i.querySelector("."+u.classSubMenuShown);t&&(console.log("HIT!"),p(document,"click",n),r(t,s))}})}}}}();
