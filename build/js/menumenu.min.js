var menumenu=function(){"use strict";function E(e,n){var t,i=e.className.trim(),o=i?i.split(" "):[];e.className=(t=n.trim().split(" ").concat(o),t.filter(function(e,n,t){return t.indexOf(e)===n})).join(" ")}function b(e,n,t){for(var i=0;i<e.length;i++)n.call(t,e[i],i)}function A(e,n){void 0===n&&(n="*");for(var t=[],i=e.parentNode;i!==document;)i.matches(n)&&t.push(i),i=i.parentNode;return t}function w(n,e,t,i){e.split(" ").forEach(function(e){n.removeEventListener(e,t,i)})}function S(n,e,t,i){e.split(" ").forEach(function(e){n.addEventListener(e,t,i)})}function q(e,n){var t,i,o=e.className.trim(),a=o?o.split(" "):[];e.className=(t=a,i=n.trim().split(" "),t.filter(function(e){return!i.includes(e)})).join(" ")}return Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=this;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null}),function(o,a){var e=o.querySelectorAll("li"),n=o.querySelectorAll("li > ul"),i=function(){var e=document.createElement("spoink"),n={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"};for(var t in n)if(void 0!==e.style[t])return n[t]}();if(o&&e.length&&n.length){a=function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}({addBackLink:!0,addDropdownToggle:!0,classDropdownToggle:"dropdown-toggle",closeOnOutsideClick:!0,idMenu:"menumenu",msgBack:"Back"},a);var r="back-link",c="has-children",t="menu-hidden",l="menu-in",u="menu-out",s="sub-menu-in",d="sub-menu-out",f="sub-menu-hidden",m="sub-menu-shown";o.id||(o.id=a.idMenu),E(o,"menumenu"),b(e,function(e,n){e.id||(e.id=o.id+"-item-"+(n+1))}),b(n,function(e){if(E(e,"sub-menu "+f),a.addDropdownToggle){var n='<span class="'+a.classDropdownToggle+' generated-toggle"></span>';e.insertAdjacentHTML("beforebegin",n)}if(a.addBackLink){var t='<li class="'+r+'"><a href="#">'+a.msgBack+"</a></li>";e.insertAdjacentHTML("afterbegin",t)}var i=e.closest("li");e.dataset.id=i.id,E(i,c)});var p=!1;b(o.querySelectorAll("."+a.classDropdownToggle),function(t){t.dataset.id=t.closest("li").id,t.dataset.depth=A(t,"li > ul").length;var e='ul[data-id="'+t.dataset.id+'"]',i=o.querySelector(e);S(t,"click",function(e){e.preventDefault();var n=o.querySelector("."+m);n?"0"===t.dataset.depth&&!1===p?y(n,v):y(n,function(){h(i)}):g(function(){h(i)}),p=!1})}),b(o.querySelectorAll("."+r),function(i){var e=A(i,"#"+o.id+" li")[1];i.dataset.id=e?e.id:"none",S(i,"click",function(e){e.preventDefault();var n=o.querySelector("."+m);if("none"===i.dataset.id)y(n,v);else{var t="."+a.classDropdownToggle+'[data-id="'+i.dataset.id+'"]';p=!0,o.querySelector(t).click()}})});var v=function(){E(o,l),q(o,t),q(o,u)},g=function(e,n){E(o,u),E(o,t),q(o,l),a.closeOnOutsideClick&&k(o),"function"==typeof e&&e.call(n)},h=function(e){E(e,s);var t=function(e,n){w(e,n.type,t),q(e,f),E(e,m)}.bind(e,e);S(e,i,t)},y=function(e,n,t){E(e,d),q(e,s);var o=function(e,n,t,i){w(e,i.type,o),E(e,f),q(e,m),q(e,d),"function"==typeof n&&n.call(t)}.bind(e,e,n,t);S(e,i,o)},k=function(o){S(document,"click",function e(n){if(!n.target.closest("."+c)){var t=o.querySelector("."+m);(i=t)&&(i.offsetWidth||i.offsetHeight||i.getClientRects().length)&&(w(document,"click",e),y(t,v))}var i})}}}}();
