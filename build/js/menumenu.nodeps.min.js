var menumenu=function(S){"use strict";return function(a,o){var e=a.querySelectorAll("li"),t=a.querySelectorAll("li > ul"),i=S.animationEndEvent();if(a&&e.length&&t.length){o=S.merge({addBackLink:!0,addDropdownToggle:!0,classDropdownToggle:"dropdown-toggle",closeOnOutsideClick:!0,idMenu:"menumenu",msgBack:"Back"},o);var n="current-menumenu",d="back-link",l="has-children",r="menu-hidden",u="menu-in",c="menu-out",f="sub-menu-in",g="sub-menu-out",m="sub-menu-hidden",v="sub-menu-shown";a.id||(a.id=o.idMenu),S.addClasses(a,"menumenu"),S.forEach(e,function(e,t){e.id||(e.id=a.id+"-item-"+(t+1))}),S.forEach(t,function(e){if(S.addClasses(e,"sub-menu "+m),o.addDropdownToggle){var t='<span class="'+o.classDropdownToggle+' generated-toggle"></span>';e.insertAdjacentHTML("beforebegin",t)}if(o.addBackLink){var n='<li class="'+d+'"><a href="#">'+o.msgBack+"</a></li>";e.insertAdjacentHTML("afterbegin",n)}var s=e.closest("li");e.setAttribute("data-id",s.id),S.addClasses(s,l)});var b=!1,s=a.querySelectorAll("."+o.classDropdownToggle);S.forEach(s,function(n){n.setAttribute("data-id",n.closest("li").id),n.setAttribute("data-depth",S.getParents(n,"li > ul").length);var e='ul[data-id="'+n.getAttribute("data-id")+'"]',s=a.querySelector(e);S.on(n,"click",function(e){e.preventDefault();var t=a.querySelector("."+v);t?"0"===n.getAttribute("data-depth")&&!1===b?y(t,p):y(t,function(){k(s)}):h(function(){k(s)},n.closest(".has-children")),b=!1})});var C=a.querySelectorAll("."+d);S.forEach(C,function(s){var e=S.getParents(s,"#"+a.id+" li")[1];s.setAttribute("data-id",e?e.id:"none"),S.on(s,"click",function(e){e.preventDefault();var t=a.querySelector("."+v);if("none"===s.getAttribute("data-id"))y(t,p);else{var n="."+o.classDropdownToggle+'[data-id="'+s.getAttribute("data-id")+'"]';b=!0,a.querySelector(n).click()}})});var p=function(){o.closeOnOutsideClick&&S.off(document,"click",A),a.querySelector("."+n)&&S.removeClasses(a.querySelector("."+n),n),S.addClasses(a,u),S.removeClasses(a,r),S.removeClasses(a,c)},h=function(e,t){S.addClasses(t,n),S.addClasses(a,c),S.removeClasses(a,u);var s=function(e,t,n){S.off(e,n.type,s),S.addClasses(e,r),o.closeOnOutsideClick&&q(),"function"==typeof t&&t()}.bind(a,a,e);S.on(a,i,s)},k=function(e){S.addClasses(e,f);var n=function(e,t){S.off(e,t.type,n),S.removeClasses(e,m),S.addClasses(e,v)}.bind(e,e);S.on(e,i,n)},y=function(e,t){S.addClasses(e,g),S.removeClasses(e,f);var s=function(e,t,n){S.off(e,n.type,s),S.addClasses(e,m),S.removeClasses(e,v),S.removeClasses(e,g),"function"==typeof t&&t()}.bind(e,e,t);S.on(e,i,s)},A=function(e){if(!e.target.closest("."+l)){var t=a.querySelector("."+v);S.isVisible(t)&&y(t,p)}},q=function(){S.on(document,"click",A)}}}}(dominoob);
