var menumenu=function(S){"use strict";return function(e,l){var u=document.querySelector(e),s=u.querySelectorAll("li"),n=u.querySelectorAll("li > ul"),a=S.animationEndEvent();if(u&&s.length&&n.length){(l=S.merge({addBackLink:!0,addDropdownToggle:!0,classBackLink:"back-link",classDropdownToggle:"dropdown-toggle",classHasChildren:"has-children",classMenuHidden:"menu-hidden",classSubMenu:"sub-menu",idMenu:"menumenu",msgBack:"Back"},l)).classMenuIn="menu-in",l.classMenuOut="menu-out",l.classSubMenuIn="sub-menu-in",l.classSubMenuOut="sub-menu-out",l.classSubMenuHidden="sub-menu-hidden",l.classSubMenuShown="sub-menu-shown",u.id||(u.id=l.idMenu),S.addClasses(u,"menumenu"),S.forEach(s,function(e,s){e.id||(e.id=u.id+"-item-"+(s+1))}),S.forEach(n,function(e){if(S.addClasses(e,l.classSubMenu+" "+l.classSubMenuHidden),l.addDropdownToggle){var s='<span class="'+l.classDropdownToggle+' generated"></span>';e.insertAdjacentHTML("beforebegin",s)}if(l.addBackLink){var n='<li class="'+l.classBackLink+'"><a href="#">'+l.msgBack+"</a></li>";e.insertAdjacentHTML("afterbegin",n)}var a=S.getClosest(e,"li");e.dataset.id=a.id,S.addClasses(a,l.classHasChildren)});var d=!1,t=u.querySelectorAll("."+l.classDropdownToggle);S.forEach(t,function(e){e.dataset.id=S.getClosest(e,"li").id,e.dataset.depth=S.getParents(e,"li > ul").length;var s='ul[data-id="'+e.dataset.id+'"]',n=u.querySelector(s);e.addEventListener("click",function(e){e.preventDefault();var s=u.querySelector("."+l.classSubMenuShown);s?"0"===this.dataset.depth&&!1===d?f(s,i):f(s,function(){r(n)}):o(function(){r(n)}),d=!1})});var c=u.querySelectorAll("."+l.classBackLink);S.forEach(c,function(a){var e=S.getParents(a,"#"+u.id+" li")[1];a.dataset.id=e?e.id:"none",a.addEventListener("click",function(e){e.preventDefault();var s=u.querySelector("."+l.classSubMenuShown);if("none"===this.dataset.id)f(s,i);else{var n="."+l.classDropdownToggle+'[data-id="'+a.dataset.id+'"]';d=!0,u.querySelector(n).click()}})});var i=function(){S.addClasses(u,l.classMenuIn),S.removeClasses(u,l.classMenuHidden),S.removeClasses(u,l.classMenuOut)},o=function(e,s){S.addClasses(u,l.classMenuOut),S.addClasses(u,l.classMenuHidden),S.removeClasses(u,l.classMenuIn),"function"==typeof e&&e.call(s)},r=function(e){S.addClasses(e,l.classSubMenuIn),e.addEventListener(a,function(){S.removeClasses(this,l.classSubMenuHidden),S.addClasses(this,l.classSubMenuShown)},{once:!0})},f=function(e,s,n){S.addClasses(e,l.classSubMenuOut),S.removeClasses(e,l.classSubMenuIn),e.addEventListener(a,function(){S.addClasses(this,l.classSubMenuHidden),S.removeClasses(this,l.classSubMenuShown),S.removeClasses(this,l.classSubMenuOut),"function"==typeof s&&s.call(n)},{once:!0})}}}}(dominoob);
