var menumenu=function(q){"use strict";return function(o,t){var e=o.querySelectorAll("li"),n=o.querySelectorAll("li > ul"),s=q.animationEndEvent();if(o&&e.length&&n.length){t=q.merge({addBackLink:!0,addDropdownToggle:!0,classDropdownToggle:"dropdown-toggle",closeOnOutsideClick:!0,idMenu:"menumenu",msgBack:"Back"},t);var l="back-link",d="has-children",a="menu-hidden",i="menu-in",c="menu-out",r="sub-menu-in",u="sub-menu-out",f="sub-menu-hidden",m="sub-menu-shown";o.id||(o.id=t.idMenu),q.addClasses(o,"menumenu"),q.forEach(e,function(e,n){e.id||(e.id=o.id+"-item-"+(n+1))}),q.forEach(n,function(e){if(q.addClasses(e,"sub-menu "+f),t.addDropdownToggle){var n='<span class="'+t.classDropdownToggle+' generated-toggle"></span>';e.insertAdjacentHTML("beforebegin",n)}if(t.addBackLink){var a='<li class="'+l+'"><a href="#">'+t.msgBack+"</a></li>";e.insertAdjacentHTML("afterbegin",a)}var s=e.closest("li");e.dataset.id=s.id,q.addClasses(s,d)});var g=!1,v=o.querySelectorAll("."+t.classDropdownToggle);q.forEach(v,function(a){a.dataset.id=a.closest("li").id,a.dataset.depth=q.getParents(a,"li > ul").length;var e='ul[data-id="'+a.dataset.id+'"]',s=o.querySelector(e);q.on(a,"click",function(e){e.preventDefault();var n=o.querySelector("."+m);n?"0"===a.dataset.depth&&!1===g?b(n,p):b(n,function(){h(s)}):k(function(){h(s)}),g=!1})});var C=o.querySelectorAll("."+l);q.forEach(C,function(s){var e=q.getParents(s,"#"+o.id+" li")[1];s.dataset.id=e?e.id:"none",q.on(s,"click",function(e){e.preventDefault();var n=o.querySelector("."+m);if("none"===s.dataset.id)b(n,p);else{var a="."+t.classDropdownToggle+'[data-id="'+s.dataset.id+'"]';g=!0,o.querySelector(a).click()}})});var p=function(){q.addClasses(o,i),q.removeClasses(o,a),q.removeClasses(o,c)},k=function(e,n){q.addClasses(o,c),q.addClasses(o,a),q.removeClasses(o,i),t.closeOnOutsideClick&&y(o),"function"==typeof e&&e.call(n)},h=function(e){q.addClasses(e,r);var a=function(e,n){q.off(e,n.type,a),q.removeClasses(e,f),q.addClasses(e,m)}.bind(e,e);q.on(e,s,a)},b=function(e,n,a){q.addClasses(e,u),q.removeClasses(e,r);var o=function(e,n,a,s){q.off(e,s.type,o),q.addClasses(e,f),q.removeClasses(e,m),q.removeClasses(e,u),"function"==typeof n&&n.call(a)}.bind(e,e,n,a);q.on(e,s,o)},y=function(s){q.on(document,"click",function e(n){if(!n.target.closest("."+d)){var a=s.querySelector("."+m);q.isVisible(a)&&(q.off(document,"click",e),b(a,p))}})}}}}(dominoob);
