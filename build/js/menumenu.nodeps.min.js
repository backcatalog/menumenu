var menumenu=function(M){"use strict";return function(e,l){var u=document.querySelector(e),s=u.querySelectorAll("li"),n=u.querySelectorAll("li > ul"),a=M.animationEndEvent();if(u&&s.length&&n.length){l=M.merge({addBackLink:!0,addDropdownToggle:!0,classBackLink:"back-link",classDropdownToggle:"dropdown-toggle",classHasChildren:"has-children",classMenu:"menumenu",classMenuHidden:"menu-hidden",classMenuIn:"menu-in",classMenuOut:"menu-out",classSubMenu:"sub-menu",classSubMenuIn:"sub-menu-in",classSubMenuOut:"sub-menu-out",classSubMenuShown:"sub-menu-shown",idMenu:"menumenu",msgBack:"Back"},l),u.id||(u.id=l.idMenu),M.addClasses(u,l.classMenu),M.forEach(s,function(e,s){e.id||(e.id=u.id+"-item-"+(s+1))}),M.forEach(n,function(e){if(M.addClasses(e,l.classSubMenu),l.addDropdownToggle){var s='<span class="'+l.classDropdownToggle+'"></span>';e.insertAdjacentHTML("beforebegin",s)}if(l.addBackLink){var n='<li class="'+l.classBackLink+'"><a href="#">'+l.msgBack+"</a></li>";e.insertAdjacentHTML("afterbegin",n)}var a=M.getClosest(e,"li");e.dataset.id=a.id,M.addClasses(a,l.classHasChildren)});var t=!1,c=u.querySelectorAll("."+l.classDropdownToggle);M.forEach(c,function(e){e.dataset.id=M.getClosest(e,"li").id,e.dataset.depth=M.getParents(e,"li > ul").length;var s='ul[data-id="'+e.dataset.id+'"]',n=u.querySelector(s);e.addEventListener("click",function(e){e.preventDefault();var s=u.querySelector("."+l.classSubMenuShown);s?"0"===this.dataset.depth&&!1===t?f(s,i):f(s,function(){r(n)}):o(function(){r(n)}),t=!1})});var d=u.querySelectorAll("."+l.classBackLink);M.forEach(d,function(a){var e=M.getParents(a,"#"+u.id+" li")[1];a.dataset.id=e?e.id:"none",a.addEventListener("click",function(e){e.preventDefault();var s=u.querySelector("."+l.classSubMenuShown);if("none"===this.dataset.id)f(s,i);else{var n="."+l.classDropdownToggle+'[data-id="'+a.dataset.id+'"]';t=!0,u.querySelector(n).click()}})});var i=function(){M.addClasses(u,l.classMenuIn),M.removeClasses(u,l.classMenuHidden),M.removeClasses(u,l.classMenuOut)},o=function(e,s){M.addClasses(u,l.classMenuOut),M.addClasses(u,l.classMenuHidden),M.removeClasses(u,l.classMenuIn),"function"==typeof e&&e.call(s)},r=function(e){M.addClasses(e,l.classSubMenuIn),e.addEventListener(a,function(){M.addClasses(this,l.classSubMenuShown)},{once:!0})},f=function(e,s,n){M.addClasses(e,l.classSubMenuOut),M.removeClasses(e,l.classSubMenuIn),e.addEventListener(a,function(){M.removeClasses(this,l.classSubMenuShown),M.removeClasses(this,l.classSubMenuOut),"function"==typeof s&&s.call(n)},{once:!0})}}}}(dominoob);
