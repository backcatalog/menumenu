var menumenu=function(w){"use strict";return function(o,t){var e=o.querySelectorAll("li"),n=o.querySelectorAll("li > ul"),i=w.animationEndEvent();if(o&&e.length&&n.length){t=w.merge({addBackLink:!0,addDropdownToggle:!0,classDropdownToggle:"dropdown-toggle",closeOnOutsideClick:!0,idMenu:"menumenu",msgBack:"Back"},t);var s="current-menumenu",l="back-link",d="has-children",r="menu-hidden",c="menu-in",u="menu-out",f="sub-menu-in",m="sub-menu-out",g="sub-menu-hidden",v="sub-menu-shown";o.id||(o.id=t.idMenu),w.addClasses(o,"menumenu"),w.forEach(e,function(e,n){e.id||(e.id=o.id+"-item-"+(n+1))}),w.forEach(n,function(e){if(w.addClasses(e,"sub-menu "+g),t.addDropdownToggle){var n='<span class="'+t.classDropdownToggle+' generated-toggle"></span>';e.insertAdjacentHTML("beforebegin",n)}if(t.addBackLink){var s='<li class="'+l+'"><a href="#">'+t.msgBack+"</a></li>";e.insertAdjacentHTML("afterbegin",s)}var a=e.closest("li");e.dataset.id=a.id,w.addClasses(a,d)});var C=!1,a=o.querySelectorAll("."+t.classDropdownToggle);w.forEach(a,function(s){s.dataset.id=s.closest("li").id,s.dataset.depth=w.getParents(s,"li > ul").length;var e='ul[data-id="'+s.dataset.id+'"]',a=o.querySelector(e);w.on(s,"click",function(e){e.preventDefault();var n=o.querySelector("."+v);n?"0"===s.dataset.depth&&!1===C?b(n,h):b(n,function(){y(a)}):k(function(){y(a)},s.closest(".has-children")),C=!1})});var p=o.querySelectorAll("."+l);w.forEach(p,function(a){var e=w.getParents(a,"#"+o.id+" li")[1];a.dataset.id=e?e.id:"none",w.on(a,"click",function(e){e.preventDefault();var n=o.querySelector("."+v);if("none"===a.dataset.id)b(n,h);else{var s="."+t.classDropdownToggle+'[data-id="'+a.dataset.id+'"]';C=!0,o.querySelector(s).click()}})});var h=function(){t.closeOnOutsideClick&&w.off(document,"click",q),o.querySelector("."+s)&&w.removeClasses(o.querySelector("."+s),s),w.addClasses(o,c),w.removeClasses(o,r),w.removeClasses(o,u)},k=function(e,n){w.addClasses(n,s),w.addClasses(o,u),w.removeClasses(o,c);var a=function(e,n,s){console.log(s.animationName),w.off(e,s.type,a),w.addClasses(e,r),t.closeOnOutsideClick&&S(),"function"==typeof n&&n()}.bind(o,o,e);w.on(o,i,a)},y=function(e){w.addClasses(e,f);var s=function(e,n){w.off(e,n.type,s),w.removeClasses(e,g),w.addClasses(e,v)}.bind(e,e);w.on(e,i,s)},b=function(e,n){w.addClasses(e,m),w.removeClasses(e,f);var a=function(e,n,s){w.off(e,s.type,a),w.addClasses(e,g),w.removeClasses(e,v),w.removeClasses(e,m),"function"==typeof n&&n()}.bind(e,e,n);w.on(e,i,a)},q=function(e){if(!e.target.closest("."+d)){var n=o.querySelector("."+v);w.isVisible(n)&&b(n,h)}},S=function(){w.on(document,"click",q)}}}}(dominoob);
