var menumenu=function(S){"use strict";return function(s,i){var e=s.querySelectorAll("li"),t=s.querySelectorAll("li > ul"),o=S.animationEndEvent();if(s&&e.length&&t.length){i=S.merge({addBackLink:!0,addDropdownToggle:!0,classDropdownToggle:"dropdown-toggle",closeOnOutsideClick:!0,idMenu:"menumenu",msgBack:"Back"},i);var n="current-menumenu",d="back-link",r="has-children",l="menu-hidden",u="menu-in",c="menu-out",f="sub-menu-in",m="sub-menu-out",g="sub-menu-hidden",v="sub-menu-shown";s.id||(s.id=i.idMenu),S.addClasses(s,"menumenu"),S.forEach(e,function(e,t){e.id||(e.id=s.id+"-item-"+(t+1))}),S.forEach(t,function(e){if(S.addClasses(e,"sub-menu "+g),i.addDropdownToggle){var t='<span aria-hidden="true" class="'+i.classDropdownToggle+' generated"></span>';e.insertAdjacentHTML("beforebegin",t)}if(i.addBackLink){var n='<li aria-hidden="true" class="'+d+'"><a href="#">'+i.msgBack+"</a></li>";e.insertAdjacentHTML("afterbegin",n)}var a=e.closest("li");e.setAttribute("data-id",a.id),S.addClasses(a,r)});var b=!1,a=s.querySelectorAll("."+i.classDropdownToggle);S.forEach(a,function(n){n.setAttribute("data-id",n.closest("li").id),n.setAttribute("data-depth",S.getParents(n,"li > ul").length);var e='ul[data-id="'+n.getAttribute("data-id")+'"]',a=s.querySelector(e);S.on(n,"click",function(e){e.preventDefault();var t=s.querySelector("."+v);t?"0"===n.getAttribute("data-depth")&&!1===b?y(t,h):y(t,function(){k(a)}):p(function(){k(a)},n.closest(".has-children")),b=!1})});var C=s.querySelectorAll("."+d);S.forEach(C,function(a){var e=S.getParents(a,"#"+s.id+" li")[1];a.setAttribute("data-id",e?e.id:"none"),S.on(a,"click",function(e){e.preventDefault();var t=s.querySelector("."+v);if("none"===a.getAttribute("data-id"))y(t,h);else{var n="."+i.classDropdownToggle+'[data-id="'+a.getAttribute("data-id")+'"]';b=!0,s.querySelector(n).click()}})});var h=function(){i.closeOnOutsideClick&&S.off(document,"click",A),s.querySelector("."+n)&&S.removeClasses(s.querySelector("."+n),n),S.addClasses(s,u),S.removeClasses(s,l),S.removeClasses(s,c)},p=function(e,t){S.addClasses(t,n),S.addClasses(s,c),S.removeClasses(s,u);var a=function(e,t,n){S.off(e,n.type,a),S.addClasses(e,l),i.closeOnOutsideClick&&q(),"function"==typeof t&&t()}.bind(s,s,e);S.on(s,o,a)},k=function(e){S.addClasses(e,f);var n=function(e,t){S.off(e,t.type,n),S.removeClasses(e,g),S.addClasses(e,v)}.bind(e,e);S.on(e,o,n)},y=function(e,t){S.addClasses(e,m),S.removeClasses(e,f);var a=function(e,t,n){S.off(e,n.type,a),S.addClasses(e,g),S.removeClasses(e,v),S.removeClasses(e,m),"function"==typeof t&&t()}.bind(e,e,t);S.on(e,o,a)},A=function(e){if(!e.target.closest("."+r)){var t=s.querySelector("."+v);S.isVisible(t)&&y(t,h)}},q=function(){S.on(document,"click",A)}}}}(dominoob);
